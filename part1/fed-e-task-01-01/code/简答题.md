## 简答题

#### 谈谈你是如何理解 JS 异步编程的，EventLoop、消息队列都是做什么的，什么是宏任务，什么是微任务？

**答:**  调用栈、事件循环、消息队列（也叫任务队列和回调队列）、作业队列（微任务队列）

##### EventLoop(事件循环)、消息队列（也叫任务队和回调队列）：

在 JavaScript 中任务分两种，一种是在主线程上排队执行的任务，只有前一个任务执行完毕，才能执行后一个任务的任务被称之为同步任务，另一种是异步任务，它会被挂载到“消息队列”中等待被执行，当异步任务通知主线程可以执行了，才会进入到主线程中执行。
同步任务在主线程中执行会形成一个“调用栈”，当“调用栈”的所有同步任务被执行完毕后，系统就会去读取“作业队列”或“消息队列”，会按照先进先出的机制，去查看哪个异步任务可以执行了，该任务才会进入到主线程执行（“定时器”，主线程会先检查执行的时间，“定时器”的事件会按照指定的时间，才返回主线程进行执行）。这个过程会在系统中周而复始地进行，不断循环的过程被称为“事件循环”（EventLoop）。在同一层级下，与任务队列（存储超时的 setTimeout()回调）相比，作业队列（用于存储已实现的 Promise 回调）的优先级更高，所以微任务永远比宏任务先执行。

##### 宏任务（macrotask）：

I/O，事件队列中的每一个事件、setTimeout / setInterval、MessageChannel 是通信渠道 API，ie11 以上和其它浏览器支持、setImmediate 目前只有 IE10 以上实现了该方法其它浏览器不支持，作用回调功能，node 支持、requestAnimationFrame node 不支持。

##### 微任务（microtask）：

Promise.then / Promise.catch / Promise.finally、MutationObserver 浏览器支持 IE11 以上 node 不支持，它会在指定的 DOM 发生变化时被调用、process.nextTick 浏览器不支持 node 支持
