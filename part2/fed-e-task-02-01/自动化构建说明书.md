**ç¯å¢ƒå‡†å¤‡**

â€‹		æŠŠä» **git** æ‹‰å»ä¸‹æ¥çš„é¡¹ç›®ç”¨ **vs code** æ‰“å¼€ï¼Œåœ¨æ ¹ç›®å½• **cmd** æ‰§è¡Œå‘½ä»¤ï¼Œå®‰è£…é¡¹ç›®ä¾èµ–çš„åŒ…

```cmd
npm install
```



## æ„å»ºé¡¹ç›®å‡†å¤‡

â€‹		ä½¿ç”¨ **Gulp** è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œgulpå®˜ç½‘ï¼šhttps://www.gulpjs.com.cn/docs/getting-started/quick-start/



### 1. å®‰è£… gulp å‘½ä»¤è¡Œå·¥å…·

```cmd
npm install --global gulp-cli
```

### 2. å®‰è£… gulp æ’ä»¶

```cmd
npm i gulp -save-dev
```

### 3. åˆ›å»ºgulpå…¥å£

â€‹		åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»º **gulpfile.js** æ–‡ä»¶(æ‹‰å»ä¸‹æ¥çš„é¡¹ç›®å·²ç»æœ‰å¯ä»¥å¿½ç•¥è¿™ä¸€æ­¥)



## æ ·å¼ç¼–è¯‘

â€‹		é¦–å…ˆé€šè¿‡gulp.src()æ–¹æ³•è·å–åˆ°æˆ‘ä»¬æƒ³è¦å¤„ç†çš„æ–‡ä»¶æµï¼Œç„¶åæŠŠæ–‡ä»¶æµé€šè¿‡pipeæ–¹æ³•å¯¼å…¥åˆ°gulpçš„æ’ä»¶ä¸­ï¼Œæœ€åæŠŠç»è¿‡æ’ä»¶å¤„ç†åçš„æµå†é€šè¿‡pipeæ–¹æ³•å¯¼å…¥åˆ°gulp.dest()ä¸­ï¼Œgulp.dest()æ–¹æ³•åˆ™æŠŠæµä¸­çš„å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ä¸­

### 1. å®ç°æ–‡ä»¶çš„è½¬æ¢

```js
const { src, dest } = require('gulp')

const style = () => {
    return src('src/assets/styles/*.scss')
        .pipe(dest('dist'))
}

module.exports = {
    style
}
```

â€‹		è¿™é‡Œæ˜¯æŠŠ **src/assets/styles** ä¸‹æ‰€æœ‰ **.scss** çš„æ–‡ä»¶è¯»å–å‡ºæ¥ï¼Œå†™å…¥åˆ°æ ¹ç›®å½•ä¸‹çš„ **dist** æ–‡ä»¶é‡Œï¼Œæ‰§è¡Œå‘½ä»¤æµ‹è¯•

```cmd
gulp style
```

ğŸŒ°

```cmd
PS F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate> yarn gulp style
yarn run v1.22.10
$ F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate\node_modules\.bin\gulp style
[21:01:03] Using gulpfile F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate\gulpfile.js
[21:01:03] Starting 'style'...
[21:01:03] Finished 'style' after 64 ms
Done in 1.27s.
```

â€‹		è¿™æ—¶å€™ä¼šçœ‹åˆ°æ ¹ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª **dist** æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä¸‰ä¸ª **.scss** çš„æ–‡ä»¶ï¼Œæ–‡ä»¶é‡Œé¢çš„å†…å®¹åˆ†åˆ«æ›´ **src/assets/styles** ç›®å½•ä¸‹çš„ **.scss** ç›¸åŒã€‚



### 2. æŒ‰ç…§åŸæœ¬çš„è·¯å¾„æ¥è½¬æ¢

â€‹		ä¸Šé¢ç”Ÿæˆçš„ **.scss** æ–‡ä»¶ä¸æ˜¯ç›´æ¥åœ¨ç›®å½•é‡Œï¼Œè€Œæ˜¯åœ¨ **src/assets/styles** æ–‡ä»¶å¤¹é‡Œï¼Œè¿™é‡Œå¯ä»¥é€šè¿‡ **src** çš„ä¸€ä¸ªé€‰é¡¹å‚æ•°çš„æ¥æŒ‡å®šè½¬æ¢è·¯å¾„æ¥å®ç°ã€‚

```js
const { src, dest } = require('gulp')

const style = () => {
    return src('src/assets/styles/*.scss', { base: 'src' })
        .pipe(dest('dist'))
}

module.exports = {
    style
}
```

â€‹		æŠŠ **dist** æ–‡ä»¶åˆ é™¤ï¼Œæ‰§è¡Œå‘½ä»¤è¿›è¡Œæµ‹è¯•

```cmd
gulp style
```

ğŸŒ°

```cmd
PS F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate> yarn gulp style
yarn run v1.22.10
$ F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate\node_modules\.bin\gulp style
[21:06:53] Using gulpfile F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate\gulpfile.js
[21:06:53] Starting 'style'...
[21:06:53] Finished 'style' after 46 ms
Done in 1.15s.
```

â€‹		è¿™æ—¶å€™ä¼šçœ‹åˆ°ç”Ÿæˆçš„ **.scss** æ–‡ä»¶åœ¨ **dist\assets\styles\_icons.scss** æ–‡ä»¶çš„å¤¹é‡Œ



### 3. .scss è½¬æ¢æˆ .css æ–‡ä»¶

â€‹		å› ä¸º **.scss** æ–‡ä»¶æ˜¯ç”Ÿäº§ç¯å¢ƒä¸èƒ½ç›´æ¥è¯†åˆ«è¿è¡Œçš„ï¼Œæ‰€ä»¥éœ€è¦æŠŠä»–ä»¬è½¬æ¢æˆ **.css** æ–‡ä»¶ã€‚

#### 1. å®‰è£… gulp-scss æ’ä»¶

```cmd
npm i gulp-sass@4.0.2 -save-dev
```

#### 2. å®‰è£… node-sass

â€‹		**gulp-scss** éœ€è¦æœ‰ **node-sass** æ”¯æŒ

```cmd
npm i node-sass -save-dev
```

#### 3. å®ç° .scss æ–‡ä»¶çš„è½¬æ¢

```js
const { src, dest } = require('gulp')
const sass = require('gulp-sass') // å¯¼å…¥åˆšåˆšå®‰è£… gulp-sass æ’ä»¶

const style = () => {
  return src('src/assets/styles/*.scss', { base: 'src' })
    .pipe(sass({ outputStyle: 'expanded' }))// æŒ‰ç…§å®Œå…¨å±•å¼€çš„æ ¼å¼è½¬æ¢
    .pipe(dest('dist'))
}

module.exports = {
  style
}
```

â€‹		æŠŠ **dist** æ–‡ä»¶åˆ é™¤ï¼Œæ‰§è¡Œå‘½ä»¤è¿›è¡Œæµ‹è¯•

```cmd
gulp style
```

ğŸŒ°

```cmd
PS F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate> gulp style
[22:02:27] Using gulpfile F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate\gulpfile.js
[22:02:27] Starting 'style'...
[22:02:27] Finished 'style' after 4
```

â€‹		è¿™æ—¶å€™çœ‹åˆ° **.scss** å®ç°äº†è½¬æ¢ï¼Œå¹¶ä¸” **css** æ–‡ä»¶çš„ **}** æŒ‰ç…§å®Œå…¨å±•å¼€çš„æ ¼å¼è½¬æ¢ï¼Œä½†æ˜¯ **_xxx.scss** æ–‡ä»¶æ˜¯è¢«å¿½ç•¥è½¬æ¢çš„ã€‚



## è„šæœ¬ç¼–è¯‘

### 1. å®‰è£…åŒ…ä¾èµ–

â€‹		å› ä¸º **js** ç¨‹åºç¼–å†™ä¼šç”¨åˆ° **ES6+** çš„ç‰¹æ€§ï¼Œéœ€è¦ç”¨åˆ° **babel** æ¥è½¬æ¢ã€‚

```cmd
npm i gulp-babel @babel/core @babel/preset-env -save-dev
```

### 2. å®ç°æ–‡ä»¶è½¬æ¢

```js
const { src, dest } = require('gulp')
const sass = require('gulp-sass') // å¯¼å…¥ gulp-sass æ’ä»¶
const babel = require('gulp-babel') // å¯¼å…¥åˆšåˆšå®‰è£… gulp-babel æ’ä»¶

const style = () => {
  return src('src/assets/styles/*.scss', { base: 'src' })
    .pipe(sass({ outputStyle: 'expanded' }))// æŒ‰ç…§å®Œå…¨å±•å¼€çš„æ ¼å¼è½¬æ¢
    .pipe(dest('dist'))
}

const script = () => {
  return src('src/assets/scripts/*.js', { base: 'src' })
    .pipe(babel({ presets: ['@babel/preset-env'] }))
    .pipe(dest('dist'))
}

module.exports = {
  style,
  script
}
```

â€‹		æ‰§è¡Œå‘½ä»¤è¿›è¡Œæµ‹è¯•

```cmd
gulp script
```

ğŸŒ°

```cmd
PS F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate> gulp script
[22:19:06] Using gulpfile F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate\gulpfile.js
[22:19:06] Starting 'script'...
[22:19:07] Finished 'script' after 1
```

â€‹		è¿™æ—¶å€™ä¼šçœ‹åˆ° **dist** æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ **scripts** æ–‡ä»¶å¤¹å¯¹åº”çš„ **.js** æ–‡ä»¶ã€‚



## é¡µé¢æ¨¡æ¿ç¼–è¯‘

### 1. å®‰è£…åŒ…ä¾èµ–

```cmd
npm i gulp-swig -save-dev
```



### 2. æŒ‰ç…§åŸæœ¬çš„è·¯å¾„æ¥è½¬æ¢

```js
const { src, dest } = require('gulp')
const sass = require('gulp-sass') // å¯¼å…¥ gulp-sass æ’ä»¶
const babel = require('gulp-babel') // å¯¼å…¥å®‰è£… gulp-babel æ’ä»¶
const swig = require('gulp-swig') // å¯¼å…¥åˆšåˆšå®‰è£… gulp-swig æ’ä»¶

const style = () => {
  return src('src/assets/styles/*.scss', { base: 'src' })
    .pipe(sass({ outputStyle: 'expanded' }))// æŒ‰ç…§å®Œå…¨å±•å¼€çš„æ ¼å¼è½¬æ¢
    .pipe(dest('dist'))
}

const script = () => {
  return src('src/assets/scripts/*.js', { base: 'src' })
    .pipe(babel({ presets: ['@babel/preset-env'] }))
    .pipe(dest('dist'))
}

const page = () => {
  return src('src/*.html', { base: 'src' }) // å‡å¦‚è¦è£…æ¢ä»»æ„ç›®å½•ä¸‹çš„ .html æ–‡ä»¶ï¼Œ'src/**/*.html'
    .pipe(swig())
    .pipe(dest('dist'))
}

module.exports = {
  style,
  script,
  page
}
```

â€‹		æ‰§è¡Œå‘½ä»¤è¿›è¡Œæµ‹è¯•

```cmd
gulp page
```

ğŸŒ°

```cmd
PS F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate> gulp page
[22:28:27] Using gulpfile F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate\gulpfile.js
[22:28:27] Starting 'page'...
[22:28:27] Finished 'page' after 63
```

â€‹		è¿™æ—¶å€™ä¼šçœ‹åˆ° **dist** æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰å¯¹åº”çš„ **.html** æ–‡ä»¶ï¼Œä½†æ˜¯ä¼š **{{pkg.name}}** çœ‹åˆ°æ¨¡æ¿æ•°æ®æ²¡æœ‰è¢«è½¬æ¢æˆåŠŸã€‚



### 3. æ¨¡æ¿ä¸­å¼•å…¥æ•°æ®

```js
const { src, dest } = require('gulp')
const sass = require('gulp-sass') // å¯¼å…¥ gulp-sass æ’ä»¶
const babel = require('gulp-babel') // å¯¼å…¥å®‰è£… gulp-babel æ’ä»¶
const swig = require('gulp-swig') // å¯¼å…¥åˆšåˆšå®‰è£… gulp-swig æ’ä»¶

const data = {
  menus: [
    {
      name: 'Home',
      icon: 'aperture',
      link: 'index.html'
    },
    {
      name: 'Features',
      link: 'features.html'
    },
    {
      name: 'About',
      link: 'about.html'
    },
    {
      name: 'Contact',
      link: '#',
      children: [
        {
          name: 'Twitter',
          link: 'https://twitter.com/w_zce'
        },
        {
          name: 'About',
          link: 'https://weibo.com/zceme'
        },
        {
          name: 'divider'
        },
        {
          name: 'About',
          link: 'https://github.com/zce'
        }
      ]
    }
  ],
  pkg: require('./package.json'),
  date: new Date()
}

const style = () => {
  return src('src/assets/styles/*.scss', { base: 'src' })
    .pipe(sass({ outputStyle: 'expanded' }))// æŒ‰ç…§å®Œå…¨å±•å¼€çš„æ ¼å¼è½¬æ¢
    .pipe(dest('dist'))
}

const script = () => {
  return src('src/assets/scripts/*.js', { base: 'src' })
    .pipe(babel({ presets: ['@babel/preset-env'] }))
    .pipe(dest('dist'))
}

const page = () => {
  return src('src/*.html', { base: 'src' }) // å‡å¦‚è¦è£…æ¢ä»»æ„ç›®å½•ä¸‹çš„ .html æ–‡ä»¶ï¼Œ'src/**/*.html'
    .pipe(swig({ data }))
    .pipe(dest('dist'))
}

module.exports = {
  style,
  script,
  page
}

```

â€‹	æ‰§è¡Œå‘½ä»¤è¿›è¡Œæµ‹è¯•

```cmd
gulp page
```

ğŸŒ°

```cmd
PS F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate> gulp page
[22:39:48] Using gulpfile F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate\gulpfile.js
[22:39:48] Starting 'page'...
[22:39:48] Finished 'page' after 55
```

â€‹		è¿™æ—¶å€™ä¼šçœ‹åˆ° **dist** æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰å¯¹åº”çš„ **.html** æ–‡ä»¶ï¼Œçœ‹åˆ°æ¨¡æ¿æ•°æ®ä¹Ÿè¢«è½¬æ¢æˆåŠŸã€‚



## å›¾ç‰‡åŠæ–‡å­—æ–‡ä»¶è½¬æ¢

### 1. å®‰è£…æ’ä»¶

```cmd
npm i gulp-imagemin -save-dev
```



### 2. åˆ›å»º img ä»»åŠ¡

```js
const { src, dest } = require('gulp')
const sass = require('gulp-sass') // å¯¼å…¥ gulp-sass æ’ä»¶
const babel = require('gulp-babel') // å¯¼å…¥å®‰è£… gulp-babel æ’ä»¶
const swig = require('gulp-swig') // å¯¼å…¥å®‰è£… gulp-swig æ’ä»¶
const imagemin = require('gulp-imagemin') // å¯¼å…¥åˆšåˆšå®‰å®‰è£… gulp-imagemin æ’ä»¶

const data = {
  menus: [
    {
      name: 'Home',
      icon: 'aperture',
      link: 'index.html'
    },
    {
      name: 'Features',
      link: 'features.html'
    },
    {
      name: 'About',
      link: 'about.html'
    },
    {
      name: 'Contact',
      link: '#',
      children: [
        {
          name: 'Twitter',
          link: 'https://twitter.com/w_zce'
        },
        {
          name: 'About',
          link: 'https://weibo.com/zceme'
        },
        {
          name: 'divider'
        },
        {
          name: 'About',
          link: 'https://github.com/zce'
        }
      ]
    }
  ],
  pkg: require('./package.json'),
  date: new Date()
}

const style = () => {
  return src('src/assets/styles/*.scss', { base: 'src' })
    .pipe(sass({ outputStyle: 'expanded' }))// æŒ‰ç…§å®Œå…¨å±•å¼€çš„æ ¼å¼è½¬æ¢
    .pipe(dest('dist'))
}

const script = () => {
  return src('src/assets/scripts/*.js', { base: 'src' })
    .pipe(babel({ presets: ['@babel/preset-env'] }))
    .pipe(dest('dist'))
}

const page = () => {
  return src('src/*.html', { base: 'src' }) // å‡å¦‚è¦è£…æ¢ä»»æ„ç›®å½•ä¸‹çš„ .html æ–‡ä»¶ï¼Œ'src/**/*.html'
    .pipe(swig({ data }))
    .pipe(dest('dist'))
}

const image = () => {
  return src('src/assets/images/**', { base: 'src' })
    .pipe(imagemin())
    .pipe(dest('dist'))
}

module.exports = {
  style,
  script,
  page,
  image
}
```

â€‹	æ‰§è¡Œå‘½ä»¤è¿›è¡Œæµ‹è¯•

```cmd
gulp image
```

ğŸŒ°

```cmd
PS F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate> gulp image
[22:46:01] Using gulpfile F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate\gulpfile.js
[22:46:01] Starting 'image'...
[22:46:03] gulp-imagemin: Minified 2 images (saved 23.1 kB - 26.7%)
[22:46:03] Finished 'image' after 1
```

â€‹		è¿™æ—¶å€™ä¼šçœ‹åˆ°å›¾ç‰‡çš„å‹ç¼©ä¿¡æ¯ï¼Œè¯æ˜å›¾ç‰‡å·²ç»æˆåŠŸè¢«è½¬æ¢äº†ï¼Œè¿™é‡Œå‹ç¼©æ˜¯æŠŠå›¾ç‰‡é‡Œé¢å¤šä½™çš„äºŒè¿›åˆ¶ä¿¡æ¯å‰”é™¤æ‰ã€‚



### 3. åˆ›å»º font ä»»åŠ¡

```js
const { src, dest } = require('gulp')
const sass = require('gulp-sass') // å¯¼å…¥ gulp-sass æ’ä»¶
const babel = require('gulp-babel') // å¯¼å…¥å®‰è£… gulp-babel æ’ä»¶
const swig = require('gulp-swig') // å¯¼å…¥å®‰è£… gulp-swig æ’ä»¶
const imagemin = require('gulp-imagemin') // å¯¼å…¥åˆšåˆšå®‰å®‰è£… gulp-imagemin æ’ä»¶

const data = {
  menus: [
    {
      name: 'Home',
      icon: 'aperture',
      link: 'index.html'
    },
    {
      name: 'Features',
      link: 'features.html'
    },
    {
      name: 'About',
      link: 'about.html'
    },
    {
      name: 'Contact',
      link: '#',
      children: [
        {
          name: 'Twitter',
          link: 'https://twitter.com/w_zce'
        },
        {
          name: 'About',
          link: 'https://weibo.com/zceme'
        },
        {
          name: 'divider'
        },
        {
          name: 'About',
          link: 'https://github.com/zce'
        }
      ]
    }
  ],
  pkg: require('./package.json'),
  date: new Date()
}

const style = () => {
  return src('src/assets/styles/*.scss', { base: 'src' })
    .pipe(sass({ outputStyle: 'expanded' }))// æŒ‰ç…§å®Œå…¨å±•å¼€çš„æ ¼å¼è½¬æ¢
    .pipe(dest('dist'))
}

const script = () => {
  return src('src/assets/scripts/*.js', { base: 'src' })
    .pipe(babel({ presets: ['@babel/preset-env'] }))
    .pipe(dest('dist'))
}

const page = () => {
  return src('src/*.html', { base: 'src' }) // å‡å¦‚è¦è£…æ¢ä»»æ„ç›®å½•ä¸‹çš„ .html æ–‡ä»¶ï¼Œ'src/**/*.html'
    .pipe(swig({ data }))
    .pipe(dest('dist'))
}

const image = () => {
  return src('src/assets/images/**', { base: 'src' })
    .pipe(imagemin())
    .pipe(dest('dist'))
}

const font = () => {
  return src('src/assets/fonts/**', { base: 'src' })
    .pipe(imagemin())
    .pipe(dest('dist'))
}

module.exports = {
  style,
  script,
  page,
  image,
  font
}
```

â€‹	æ‰§è¡Œå‘½ä»¤è¿›è¡Œæµ‹è¯•

```cmd
gulp font
```

ğŸŒ°

```cmd
PS F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate> gulp font
[22:50:19] Using gulpfile F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate\gulpfile.js
[22:50:19] Starting 'font'...
[22:50:20] gulp-imagemin: Minified 1 image (saved 693 B - 6%)
[22:50:20] Finished 'font' after 1.06 s
```

â€‹		è¿™æ—¶å€™ä¼šçœ‹åˆ°æ–‡å­—çš„å‹ç¼©ä¿¡æ¯ã€‚



## å…¶ä»–æ™®é€šæ–‡ä»¶è½¬æ¢

### 1. å®ç°æ–‡ä»¶çš„è½¬æ¢

```js
// å®ç°è¿™ä¸ªé¡¹ç›®çš„æ„å»ºä»»åŠ¡
const { src, dest, parallel } = require('gulp')
const sass = require('gulp-sass') // å¯¼å…¥ gulp-sass æ’ä»¶
const babel = require('gulp-babel') // å¯¼å…¥å®‰è£… gulp-babel æ’ä»¶
const swig = require('gulp-swig') // å¯¼å…¥å®‰è£… gulp-swig æ’ä»¶
const imagemin = require('gulp-imagemin') // å¯¼å…¥åˆšåˆšå®‰å®‰è£… gulp-imagemin æ’ä»¶

const data = {
  menus: [
    {
      name: 'Home',
      icon: 'aperture',
      link: 'index.html'
    },
    {
      name: 'Features',
      link: 'features.html'
    },
    {
      name: 'About',
      link: 'about.html'
    },
    {
      name: 'Contact',
      link: '#',
      children: [
        {
          name: 'Twitter',
          link: 'https://twitter.com/w_zce'
        },
        {
          name: 'About',
          link: 'https://weibo.com/zceme'
        },
        {
          name: 'divider'
        },
        {
          name: 'About',
          link: 'https://github.com/zce'
        }
      ]
    }
  ],
  pkg: require('./package.json'),
  date: new Date()
}

const style = () => {
  return src('src/assets/styles/*.scss', { base: 'src' })
    .pipe(sass({ outputStyle: 'expanded' }))// æŒ‰ç…§å®Œå…¨å±•å¼€çš„æ ¼å¼è½¬æ¢
    .pipe(dest('dist'))
}

const script = () => {
  return src('src/assets/scripts/*.js', { base: 'src' })
    .pipe(babel({ presets: ['@babel/preset-env'] }))
    .pipe(dest('dist'))
}

const page = () => {
  return src('src/*.html', { base: 'src' }) // å‡å¦‚è¦è£…æ¢ä»»æ„ç›®å½•ä¸‹çš„ .html æ–‡ä»¶ï¼Œ'src/**/*.html'
    .pipe(swig({ data }))
    .pipe(dest('dist'))
}

const image = () => {
  return src('src/assets/images/**', { base: 'src' })
    .pipe(imagemin())
    .pipe(dest('dist'))
}

const font = () => {
  return src('src/assets/fonts/**', { base: 'src' })
    .pipe(imagemin())
    .pipe(dest('dist'))
}

const extra = () => {
  return src('public/**', { base: 'public' })
    .pipe(dest('dist'))
}

// parallel åŒæ—¶æ‰§è¡Œ
const compile = parallel(style, script, page, image, font)

const build = parallel(compile, extra)

module.exports = {
  compile,
  build
}
```

æ‰§è¡Œå‘½ä»¤è¿›è¡Œæµ‹è¯•

```cmd
 gulp build
```

ğŸŒ°

```cmd
PS F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate>  gulp build
[23:01:44] Using gulpfile F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate\gulpfile.js
[23:01:44] Starting 'build'...
[23:01:44] Starting 'extra'...
[23:01:44] Starting 'style'...
[23:01:44] Starting 'script'...
[23:01:44] Starting 'page'...
[23:01:44] Starting 'image'...
[23:01:44] Starting 'font'...
[23:01:46] Finished 'style' after 2.71 s
[23:01:47] Finished 'extra' after 2.88 s
[23:01:47] Finished 'script' after 2.89 s
[23:01:47] Finished 'page' after 2.89 s
[23:01:47] gulp-imagemin: Minified 1 image (saved 693 B - 6%)
[23:01:47] Finished 'font' after 2.9 s
[23:01:47] gulp-imagemin: Minified 2 images (saved 23.1 kB - 26.7%)
[23:01:47] Finished 'image' after 3.31 s
[23:01:47] Finished 'build' after 3
```

â€‹		è¿™æ—¶å€™ä¼šçœ‹åˆ°æ„å»ºä»»åŠ¡ä¼šåŒæ—¶æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæ¯•ååœ¨ **dist** æ–‡ä»¶ä¸‹æœ‰ **public** ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚

### 

## æ–‡ä»¶æ¸…é™¤

â€‹		ç”±åœ¨åœ¨å¼€å‘é˜¶æ®µï¼Œå®ç°åŠŸèƒ½çš„ä»£ç éœ€è¦è¿­ä»£å¼åœ°è°ƒè¯•å¼€å‘ï¼Œä¹‹å‰ä¸ºäº†çœ‹åˆ°æµ‹è¯•æ•ˆæœï¼Œéœ€è¦æ‰‹åŠ¨æŠŠ **dist** æ–‡ä»¶åˆ é™¤ï¼Œè¿™æ ·åœ¨å¼€å‘ä¸­æœ‰ç‚¹ä¸å‹å¥½ã€‚å¯ä»¥ä½¿ç”¨æ’ä»¶æ¥å¸®å¿™å®Œæˆæ–‡ä»¶çš„åˆ é™¤ã€‚

### 1. å®‰è£…æ’ä»¶

```cmd
npm i del -save-dev
```



### 2. åˆ›å»º del ä»»åŠ¡

```js
// å®ç°è¿™ä¸ªé¡¹ç›®çš„æ„å»ºä»»åŠ¡
const { src, dest, parallel, series } = require('gulp')

const sass = require('gulp-sass') // å¯¼å…¥ gulp-sass æ’ä»¶
const babel = require('gulp-babel') // å¯¼å…¥å®‰è£… gulp-babel æ’ä»¶
const swig = require('gulp-swig') // å¯¼å…¥å®‰è£… gulp-swig æ’ä»¶
const imagemin = require('gulp-imagemin') // å¯¼å…¥å®‰è£… gulp-imagemin æ’ä»¶

const del = require('del') // å¯¼å…¥ gulp-sass æ’ä»¶

const data = {
  menus: [
    {
      name: 'Home',
      icon: 'aperture',
      link: 'index.html'
    },
    {
      name: 'Features',
      link: 'features.html'
    },
    {
      name: 'About',
      link: 'about.html'
    },
    {
      name: 'Contact',
      link: '#',
      children: [
        {
          name: 'Twitter',
          link: 'https://twitter.com/w_zce'
        },
        {
          name: 'About',
          link: 'https://weibo.com/zceme'
        },
        {
          name: 'divider'
        },
        {
          name: 'About',
          link: 'https://github.com/zce'
        }
      ]
    }
  ],
  pkg: require('./package.json'),
  date: new Date()
}

const clean = () => {
  return del(['dist'])
}


const style = () => {
  return src('src/assets/styles/*.scss', { base: 'src' })
    .pipe(sass({ outputStyle: 'expanded' }))// æŒ‰ç…§å®Œå…¨å±•å¼€çš„æ ¼å¼è½¬æ¢
    .pipe(dest('dist'))
}

const script = () => {
  return src('src/assets/scripts/*.js', { base: 'src' })
    .pipe(babel({ presets: ['@babel/preset-env'] }))
    .pipe(dest('dist'))
}

const page = () => {
  return src('src/*.html', { base: 'src' }) // å‡å¦‚è¦è£…æ¢ä»»æ„ç›®å½•ä¸‹çš„ .html æ–‡ä»¶ï¼Œ'src/**/*.html'
    .pipe(swig({ data }))
    .pipe(dest('dist'))
}

const image = () => {
  return src('src/assets/images/**', { base: 'src' })
    .pipe(imagemin())
    .pipe(dest('dist'))
}

const font = () => {
  return src('src/assets/fonts/**', { base: 'src' })
    .pipe(imagemin())
    .pipe(dest('dist'))
}

const extra = () => {
  return src('public/**', { base: 'public' })
    .pipe(dest('dist'))
}

// parallel åŒæ—¶æ‰§è¡Œ
const compile = parallel(style, script, page, image, font)

// series ç©¿è¡Œæ‰§è¡Œ
const build = series(clean, parallel(compile, extra))

module.exports = {
  compile,
  build
}
```

æ‰§è¡Œå‘½ä»¤è¿›è¡Œæµ‹è¯•

```cmd
 gulp build
```

ğŸŒ°

```cmd
PS F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate>  gulp build
[23:10:51] Using gulpfile F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate\gulpfile.js
[23:10:51] Starting 'build'...
[23:10:51] Starting 'clean'...
[23:10:51] Finished 'clean' after 27 ms
[23:10:51] Starting 'extra'...
[23:10:51] Starting 'style'...
[23:10:51] Starting 'script'...
[23:10:51] Starting 'page'...
[23:10:51] Starting 'image'...
[23:10:51] Starting 'font'...
[23:10:53] Finished 'style' after 2.28 s
[23:10:53] Finished 'extra' after 2.28 s
[23:10:53] Finished 'script' after 2.46 s
[23:10:53] Finished 'page' after 2.46 s
[23:10:53] gulp-imagemin: Minified 1 image (saved 693 B - 6%)
[23:10:53] Finished 'font' after 2.48 s
[23:10:54] gulp-imagemin: Minified 2 images (saved 23.1 kB - 26.7%)
[23:10:54] Finished 'image' after 2.9 s
[23:10:54] Finished 'build' after 2
```

â€‹		è¿™æ—¶å€™ä¼šçœ‹åˆ°å…ˆæ‰§è¡Œ **clean** æ„å»ºä»»åŠ¡ï¼Œç„¶åå†å»åŒæ—¶æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚



## è‡ªåŠ¨åŠ è½½æ’ä»¶

â€‹		ç”±äºå¯¹ä¸åŒçš„æ–‡ä»¶è¿›è¡Œæ„å»ºï¼Œå°±éœ€è¦ä¸åŒçš„æ’ä»¶æ¥å®Œæˆï¼Œå¦‚æœéšç€æ„å»ºçš„ä»»åŠ¡å¢å¤šï¼Œ**require** çš„æ’ä»¶ä»£ç è¶Šæ¥è¶Šå¤šï¼Œä¸åˆ©äºåé¢çš„ç®¡ç†ï¼Œè¿™æ—¶å€™éœ€è¦è‡ªåŠ¨åŠ è½½æ’ä»¶æ¥è¿›è¡Œæ’ä»¶åŠ è½½ã€‚

### 1. å®‰è£…ä¾èµ–åŒ…

```cmd
npm i gulp-load-plugins -save-dev
```



### 2. ä½¿ç”¨æ’ä»¶

â€‹	å³é”® å˜é‡åå­— ---> é‡å‘½åç¬¦å· ï¼ˆå¿«æ·é”®ï¼šF2ï¼‰

```js
// å®ç°è¿™ä¸ªé¡¹ç›®çš„æ„å»ºä»»åŠ¡
const { src, dest, parallel, series } = require('gulp')

const loadPlugins = require('gulp-load-plugins') // å¯¼å…¥æ’ä»¶ç®¡ç†å·¥å…·
const plugins = loadPlugins()

const del = require('del') // å¯¼å…¥ gulp-sass æ’ä»¶

const data = {
  menus: [
    {
      name: 'Home',
      icon: 'aperture',
      link: 'index.html'
    },
    {
      name: 'Features',
      link: 'features.html'
    },
    {
      name: 'About',
      link: 'about.html'
    },
    {
      name: 'Contact',
      link: '#',
      children: [
        {
          name: 'Twitter',
          link: 'https://twitter.com/w_zce'
        },
        {
          name: 'About',
          link: 'https://weibo.com/zceme'
        },
        {
          name: 'divider'
        },
        {
          name: 'About',
          link: 'https://github.com/zce'
        }
      ]
    }
  ],
  pkg: require('./package.json'),
  date: new Date()
}

const clean = () => {
  return del(['dist'])
}


const style = () => {
  return src('src/assets/styles/*.scss', { base: 'src' })
    .pipe(plugins.sass({ outputStyle: 'expanded' }))// æŒ‰ç…§å®Œå…¨å±•å¼€çš„æ ¼å¼è½¬æ¢
    .pipe(dest('dist'))
}

const script = () => {
  return src('src/assets/scripts/*.js', { base: 'src' })
    .pipe(plugins.babel({ presets: ['@babel/preset-env'] }))
    .pipe(dest('dist'))
}

const page = () => {
  return src('src/*.html', { base: 'src' }) // å‡å¦‚è¦è£…æ¢ä»»æ„ç›®å½•ä¸‹çš„ .html æ–‡ä»¶ï¼Œ'src/**/*.html'
    .pipe(plugins.swig({ data }))
    .pipe(dest('dist'))
}

const image = () => {
  return src('src/assets/images/**', { base: 'src' })
    .pipe(plugins.imagemin())
    .pipe(dest('dist'))
}

const font = () => {
  return src('src/assets/fonts/**', { base: 'src' })
    .pipe(plugins.imagemin())
    .pipe(dest('dist'))
}

const extra = () => {
  return src('public/**', { base: 'public' })
    .pipe(dest('dist'))
}

// parallel åŒæ—¶æ‰§è¡Œ
const compile = parallel(style, script, page, image, font)

// series ç©¿è¡Œæ‰§è¡Œ
const build = series(clean, parallel(compile, extra))

module.exports = {
  compile,
  build
}
```

â€‹		æ‰§è¡Œå‘½ä»¤è¿›è¡Œæµ‹è¯•

```cmd
gulp build
```

ğŸŒ°

```cmd
PS F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate>  gulp build
[23:20:29] Using gulpfile F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate\gulpfile.js
[23:20:29] Starting 'build'...
[23:20:29] Starting 'clean'...
[23:20:29] Finished 'clean' after 24 ms
[23:20:29] Starting 'extra'...
[23:20:29] Starting 'style'...
[23:20:29] Starting 'script'...
[23:20:29] Starting 'page'...
[23:20:29] Starting 'image'...
[23:20:29] Starting 'font'...
[23:20:33] Finished 'style' after 3.26 s
[23:20:33] Finished 'extra' after 3.46 s
[23:20:33] Finished 'script' after 3.46 s
[23:20:33] Finished 'page' after 3.46 s
[23:20:33] gulp-imagemin: Minified 1 image (saved 693 B - 6%)
[23:20:33] Finished 'font' after 3.47 s
[23:20:33] gulp-imagemin: Minified 2 images (saved 23.1 kB - 26.7%)
[23:20:33] Finished 'image' after 3.91 s
[23:20:33] Finished 'build' after
```

â€‹		è¿™æ—¶å€™ä¼šçœ‹åˆ°å…ˆæ‰§è¡Œ **clean** æ„å»ºä»»åŠ¡ï¼Œç„¶åå†å»åŒæ—¶æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼ŒæˆåŠŸæ‰§è¡Œè¯æ˜è‡ªåŠ¨åŠ è½½æ’ä»¶èµ·ä½œç”¨äº†ã€‚



## æœåŠ¡å™¨å¼€å‘

â€‹		å½“ç½‘é¡µå¼€å‘å®Œæˆåéœ€è¦åœ¨æµè§ˆå™¨ä¸­è¿›è¡Œé¢„è§ˆè°ƒè¯•ç­‰ï¼Œè¿™æ—¶éœ€è¦çƒ­æ›´æ–°å¼€å‘æœåŠ¡å™¨ã€‚

### 1. å®‰è£…ä¾èµ–åŒ…

```cmd
npm i browser-sync -save-dev
```



### 2. åˆ›å»º serve ä»»åŠ¡

```js
// å®ç°è¿™ä¸ªé¡¹ç›®çš„æ„å»ºä»»åŠ¡
const { src, dest, parallel, series } = require('gulp')

const loadPlugins = require('gulp-load-plugins') // å¯¼å…¥æ’ä»¶è‡ªåŠ¨åŠ è½½å·¥å…·
const plugins = loadPlugins()

const browserSync = require('browser-sync') // å¯¼å…¥ browser-sync æ’ä»¶
const bs = browserSync.create()

const del = require('del') // å¯¼å…¥ del æ’ä»¶

const data = {
  menus: [
    {
      name: 'Home',
      icon: 'aperture',
      link: 'index.html'
    },
    {
      name: 'Features',
      link: 'features.html'
    },
    {
      name: 'About',
      link: 'about.html'
    },
    {
      name: 'Contact',
      link: '#',
      children: [
        {
          name: 'Twitter',
          link: 'https://twitter.com/w_zce'
        },
        {
          name: 'About',
          link: 'https://weibo.com/zceme'
        },
        {
          name: 'divider'
        },
        {
          name: 'About',
          link: 'https://github.com/zce'
        }
      ]
    }
  ],
  pkg: require('./package.json'),
  date: new Date()
}

const clean = () => {
  return del(['dist'])
}

const style = () => {
  return src('src/assets/styles/*.scss', { base: 'src' })
    .pipe(plugins.sass({ outputStyle: 'expanded' }))// æŒ‰ç…§å®Œå…¨å±•å¼€çš„æ ¼å¼è½¬æ¢
    .pipe(dest('dist'))
}

const script = () => {
  return src('src/assets/scripts/*.js', { base: 'src' })
    .pipe(plugins.babel({ presets: ['@babel/preset-env'] }))
    .pipe(dest('dist'))
}

const page = () => {
  return src('src/*.html', { base: 'src' }) // å‡å¦‚è¦è£…æ¢ä»»æ„ç›®å½•ä¸‹çš„ .html æ–‡ä»¶ï¼Œ'src/**/*.html'
    .pipe(plugins.swig({ data }))
    .pipe(dest('dist'))
}

const image = () => {
  return src('src/assets/images/**', { base: 'src' })
    .pipe(plugins.imagemin())
    .pipe(dest('dist'))
}

const font = () => {
  return src('src/assets/fonts/**', { base: 'src' })
    .pipe(plugins.imagemin())
    .pipe(dest('dist'))
}

const extra = () => {
  return src('public/**', { base: 'public' })
    .pipe(dest('dist'))
}

const serve = () => {
  bs.init({
    server: {
      baseDir: 'dist',
    }
  })
}

// parallel åŒæ—¶æ‰§è¡Œ
const compile = parallel(style, script, page, image, font)

// series ç©¿è¡Œæ‰§è¡Œ
const build = series(clean, parallel(compile, extra))

module.exports = {
  compile,
  build,
  serve
}
```

â€‹		æ‰§è¡Œå‘½ä»¤è¿›è¡Œæµ‹è¯•

```cmd
gulp serve
```

ğŸŒ°

```cmd
PS F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate> gulp serve
[23:30:32] Using gulpfile F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate\gulpfile.js
[23:30:32] Starting 'serve'...
[Browsersync] Access URLs:
 -------------------------------------
       Local: http://localhost:3000
    External: http://192.168.31.9:3000
 -------------------------------------
          UI: http://localhost:3001
 UI External: http://localhost:3001
 -------------------------------------
[Browsersync] Serving files from: 
_
```

â€‹		è¿™æ—¶å€™ä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨é¢„è§ˆï¼Œä½†æ˜¯æ ·å¼ç­‰èµ„æºæ²¡åŠ è½½è¿›æ¥ã€‚



### 3. ä¿®æ”¹ server ä»»åŠ¡

â€‹		è¿›è¡Œè·Ÿå¤šçš„ä»»åŠ¡é…ç½®

```js
...

const serve = () => {
    bs.init({
        server: {
            baseDir: 'dist',
            routes: {
                '/node_modules': 'node_modules'
            }
        }
    })
}

...
```

â€‹		æ‰§è¡Œå‘½ä»¤è¿›è¡Œæµ‹è¯•

```cmd
gulp serve
```

ğŸŒ°

```cmd
PS F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate> gulp serve
[23:33:26] Using gulpfile F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate\gulpfile.js
[23:33:26] Starting 'serve'...
[Browsersync] Access URLs:
 -------------------------------------
       Local: http://localhost:2080
    External: http://192.168.31.9:2080
 -------------------------------------
          UI: http://localhost:3001
 UI External: http://localhost:3001
 -------------------------------------
[Browsersync] Serving files from: d
_
```

â€‹		ä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨é¢„è§ˆï¼Œä½†æ˜¯é¡µé¢å·²ç»æœ‰æ ·å¼äº†ã€‚



## ç›‘è§†æ–‡ä»¶å˜åŒ–

â€‹		å®ç°ä»£ç ä¿®æ”¹åè‡ªåŠ¨ç¼–è¯‘ï¼Œæµè§ˆå™¨è‡ªåŠ¨æ›´æ–°

### 1. å®ç°æ‰€æœ‰äº§ç”Ÿæ„å»ºä»»åŠ¡ç›‘å¬

```js
// å®ç°è¿™ä¸ªé¡¹ç›®çš„æ„å»ºä»»åŠ¡
const { src, dest, parallel, series, watch } = require('gulp')

const loadPlugins = require('gulp-load-plugins') // å¯¼å…¥æ’ä»¶è‡ªåŠ¨åŠ è½½å·¥å…·
const plugins = loadPlugins()

const browserSync = require('browser-sync') // å¯¼å…¥ browser-sync æ’ä»¶
const bs = browserSync.create()

const del = require('del') // å¯¼å…¥ del æ’ä»¶

const data = {
  menus: [
    {
      name: 'Home',
      icon: 'aperture',
      link: 'index.html'
    },
    {
      name: 'Features',
      link: 'features.html'
    },
    {
      name: 'About',
      link: 'about.html'
    },
    {
      name: 'Contact',
      link: '#',
      children: [
        {
          name: 'Twitter',
          link: 'https://twitter.com/w_zce'
        },
        {
          name: 'About',
          link: 'https://weibo.com/zceme'
        },
        {
          name: 'divider'
        },
        {
          name: 'About',
          link: 'https://github.com/zce'
        }
      ]
    }
  ],
  pkg: require('./package.json'),
  date: new Date()
}

const clean = () => {
  return del(['dist'])
}

const style = () => {
  return src('src/assets/styles/*.scss', { base: 'src' })
    .pipe(plugins.sass({ outputStyle: 'expanded' }))// æŒ‰ç…§å®Œå…¨å±•å¼€çš„æ ¼å¼è½¬æ¢
    .pipe(dest('dist'))
}

const script = () => {
  return src('src/assets/scripts/*.js', { base: 'src' })
    .pipe(plugins.babel({ presets: ['@babel/preset-env'] }))
    .pipe(dest('dist'))
}

const page = () => {
  return src('src/*.html', { base: 'src' }) // å‡å¦‚è¦è£…æ¢ä»»æ„ç›®å½•ä¸‹çš„ .html æ–‡ä»¶ï¼Œ'src/**/*.html'
    .pipe(plugins.swig({ data }))
    .pipe(dest('dist'))
}

const image = () => {
  return src('src/assets/images/**', { base: 'src' })
    .pipe(plugins.imagemin())
    .pipe(dest('dist'))
}

const font = () => {
  return src('src/assets/fonts/**', { base: 'src' })
    .pipe(plugins.imagemin())
    .pipe(dest('dist'))
}

const extra = () => {
  return src('public/**', { base: 'public' })
    .pipe(dest('dist'))
}

const serve = () => {
  // ç›‘å¬çš„æ–‡ä»¶è·¯å¾„ æ–‡ä»¶å‘ç”Ÿå˜åŒ–åéœ€è¦æ‰§è¡Œçš„æ„å»ºä»»åŠ¡
  watch('src/assets/styles/*.scss', style)
  watch('src/assets/scripts/*.js', script)
  watch('src/*.html', page)
  watch('src/assets/images/**', image)
  watch('src/assets/fonts/**', font)
  watch('public/**', extra)

  bs.init({
    notify: false, // å…³æ‰æç¤º
    port: 2080, // è®¾ç½®ç«¯å£
    // open: false, // å–æ¶ˆè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
    files: 'dist/**', // éœ€è¦ç›‘å¬çš„æ–‡ä»¶
    server: {
      baseDir: 'dist',
      routes: {
        '/node_modules': 'node_modules'
      }
    }
  })
}

// parallel åŒæ—¶æ‰§è¡Œ
const compile = parallel(style, script, page, image, font)

// series ç©¿è¡Œæ‰§è¡Œ
const build = series(clean, parallel(compile, extra))

module.exports = {
  compile,
  build,
  serve
}
```

â€‹		æ‰§è¡Œå‘½ä»¤è¿›è¡Œæµ‹è¯•

```cmd
gulp serve
```

ğŸŒ°

```cmd
PS F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate> gulp serve
[23:41:48] Using gulpfile F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate\gulpfile.js
[23:41:48] Starting 'serve'...
[Browsersync] Access URLs:
 -------------------------------------
       Local: http://localhost:2080
    External: http://192.168.31.9:2080
 -------------------------------------
          UI: http://localhost:3001
 UI External: http://localhost:3001
 -------------------------------------
[Browsersync] Serving files from: dist
[Browsersync] Watching files...
[23:42:36] Starting 'style'...
[23:42:36] Finished 'style' after 326 ms
[Browsersync] File event [change] : dist\assets\styles\main.css
_
```

â€‹		ä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨é¢„è§ˆï¼Œè¿™æ—¶å€™æŠŠ**src\assets\styles\_variables.scss** çš„ **$jumbotron-bg: #fff;** ä¿®æ”¹æˆ **$jumbotron-bg: #f00;** æµè§ˆå™¨ä¼šè‡ªåŠ¨åˆ·æ–°é¡µé¢ã€‚



### 2. ä¼˜åŒ–ç›‘å¬å‡å°‘å¼€é”€

â€‹	å›¾ç‰‡èµ„æºç›‘å¬ ***image*** ã€***font***ã€ ***extra*** ä¸éœ€è¦æ—¶åˆ» **watch**

```js
// å®ç°è¿™ä¸ªé¡¹ç›®çš„æ„å»ºä»»åŠ¡
const { src, dest, parallel, series, watch } = require('gulp')

const loadPlugins = require('gulp-load-plugins') // å¯¼å…¥æ’ä»¶è‡ªåŠ¨åŠ è½½å·¥å…·
const plugins = loadPlugins()

const browserSync = require('browser-sync') // å¯¼å…¥ browser-sync æ’ä»¶
const bs = browserSync.create()

const del = require('del') // å¯¼å…¥ del æ’ä»¶

const data = {
  menus: [
    {
      name: 'Home',
      icon: 'aperture',
      link: 'index.html'
    },
    {
      name: 'Features',
      link: 'features.html'
    },
    {
      name: 'About',
      link: 'about.html'
    },
    {
      name: 'Contact',
      link: '#',
      children: [
        {
          name: 'Twitter',
          link: 'https://twitter.com/w_zce'
        },
        {
          name: 'About',
          link: 'https://weibo.com/zceme'
        },
        {
          name: 'divider'
        },
        {
          name: 'About',
          link: 'https://github.com/zce'
        }
      ]
    }
  ],
  pkg: require('./package.json'),
  date: new Date()
}

const clean = () => {
  return del(['dist'])
}

const style = () => {
  return src('src/assets/styles/*.scss', { base: 'src' })
    .pipe(plugins.sass({ outputStyle: 'expanded' }))// æŒ‰ç…§å®Œå…¨å±•å¼€çš„æ ¼å¼è½¬æ¢
    .pipe(dest('dist'))
}

const script = () => {
  return src('src/assets/scripts/*.js', { base: 'src' })
    .pipe(plugins.babel({ presets: ['@babel/preset-env'] }))
    .pipe(dest('dist'))
}

const page = () => {
  return src('src/*.html', { base: 'src' }) // å‡å¦‚è¦è£…æ¢ä»»æ„ç›®å½•ä¸‹çš„ .html æ–‡ä»¶ï¼Œ'src/**/*.html'
    .pipe(plugins.swig({ data }))
    .pipe(dest('dist'))
}

const image = () => {
  return src('src/assets/images/**', { base: 'src' })
    .pipe(plugins.imagemin())
    .pipe(dest('dist'))
}

const font = () => {
  return src('src/assets/fonts/**', { base: 'src' })
    .pipe(plugins.imagemin())
    .pipe(dest('dist'))
}

const extra = () => {
  return src('public/**', { base: 'public' })
    .pipe(dest('dist'))
}

const serve = () => {
  // ç›‘å¬çš„æ–‡ä»¶è·¯å¾„ æ–‡ä»¶å‘ç”Ÿå˜åŒ–åéœ€è¦æ‰§è¡Œçš„æ„å»ºä»»åŠ¡
  watch('src/assets/styles/*.scss', style)
  watch('src/assets/scripts/*.js', script)
  watch('src/*.html', page)
  watch([
    'src/assets/images/**',
    'src/assets/fonts/**',
    'public/**'
  ], bs.reload) // ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œé‡æ–°å‘é€è¯·æ±‚

  bs.init({
    notify: false, // å…³æ‰æç¤º
    port: 3080, // è®¾ç½®ç«¯å£
    // open: false, // å–æ¶ˆè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
    files: 'dist/**', // éœ€è¦ç›‘å¬çš„æ–‡ä»¶
    server: {
      baseDir: ['dist', 'src', 'public'], // ä¼šæ ¹æ®æ–‡ä»¶å¤¹ä¾æ¬¡å¯»æ‰¾æ–‡ä»¶
      routes: {
        '/node_modules': 'node_modules'
      }
    }
  })
}
 
// parallel åŒæ—¶æ‰§è¡Œ series ç©¿è¡Œæ‰§è¡Œ
const compile = parallel(style, script, page)

// ä¸Šçº¿å‰æ‰§è¡Œçš„ä»»åŠ¡
const build = series(clean, parallel(compile, image, font, extra))

// å¼€å‘é˜¶æ®µæ‰§è¡Œçš„ä»»åŠ¡
const develop = series(compile, serve)

module.exports = {
  clean,
  compile,
  build,
  develop
}
```

â€‹		æ‰§è¡Œå‘½ä»¤è¿›è¡Œæµ‹è¯•

```cmd
gulp develop
```



## å¤„ç†æ–‡ä»¶çš„å¼•ç”¨å…³ç³»

### 1. å®‰è£…ä¾èµ–åŒ…

```cmd
npm i gulp-useref -save-dev
```



### 2. åˆ›å»º useref ä»»åŠ¡

```js
// å®ç°è¿™ä¸ªé¡¹ç›®çš„æ„å»ºä»»åŠ¡
const { src, dest, parallel, series, watch } = require('gulp')

const loadPlugins = require('gulp-load-plugins') // å¯¼å…¥æ’ä»¶è‡ªåŠ¨åŠ è½½å·¥å…·
const plugins = loadPlugins()

const browserSync = require('browser-sync') // å¯¼å…¥ browser-sync æ’ä»¶
const bs = browserSync.create()

const del = require('del') // å¯¼å…¥ del æ’ä»¶

const data = {
  menus: [
    {
      name: 'Home',
      icon: 'aperture',
      link: 'index.html'
    },
    {
      name: 'Features',
      link: 'features.html'
    },
    {
      name: 'About',
      link: 'about.html'
    },
    {
      name: 'Contact',
      link: '#',
      children: [
        {
          name: 'Twitter',
          link: 'https://twitter.com/w_zce'
        },
        {
          name: 'About',
          link: 'https://weibo.com/zceme'
        },
        {
          name: 'divider'
        },
        {
          name: 'About',
          link: 'https://github.com/zce'
        }
      ]
    }
  ],
  pkg: require('./package.json'),
  date: new Date()
}

const clean = () => {
  return del(['dist'])
}

const style = () => {
  return src('src/assets/styles/*.scss', { base: 'src' })
    .pipe(plugins.sass({ outputStyle: 'expanded' }))// æŒ‰ç…§å®Œå…¨å±•å¼€çš„æ ¼å¼è½¬æ¢
    .pipe(dest('dist'))
}

const script = () => {
  return src('src/assets/scripts/*.js', { base: 'src' })
    .pipe(plugins.babel({ presets: ['@babel/preset-env'] }))
    .pipe(dest('dist'))
}

const page = () => {
  return src('src/*.html', { base: 'src' }) // å‡å¦‚è¦è£…æ¢ä»»æ„ç›®å½•ä¸‹çš„ .html æ–‡ä»¶ï¼Œ'src/**/*.html'
    .pipe(plugins.swig({ data }))
    .pipe(dest('dist'))
}

const image = () => {
  return src('src/assets/images/**', { base: 'src' })
    .pipe(plugins.imagemin())
    .pipe(dest('dist'))
}

const font = () => {
  return src('src/assets/fonts/**', { base: 'src' })
    .pipe(plugins.imagemin())
    .pipe(dest('dist'))
}

const extra = () => {
  return src('public/**', { base: 'public' })
    .pipe(dest('dist'))
}

const serve = () => {
  // ç›‘å¬çš„æ–‡ä»¶è·¯å¾„ æ–‡ä»¶å‘ç”Ÿå˜åŒ–åéœ€è¦æ‰§è¡Œçš„æ„å»ºä»»åŠ¡
  watch('src/assets/styles/*.scss', style)
  watch('src/assets/scripts/*.js', script)
  watch('src/*.html', page)
  watch([
    'src/assets/images/**',
    'src/assets/fonts/**',
    'public/**'
  ], bs.reload) // ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œé‡æ–°å‘é€è¯·æ±‚

  bs.init({
    notify: false, // å…³æ‰æç¤º
    port: 3080, // è®¾ç½®ç«¯å£
    // open: false, // å–æ¶ˆè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
    // files: 'dist/**', // éœ€è¦ç›‘å¬çš„æ–‡ä»¶
    server: {
      baseDir: ['dist', 'src', 'public'], // ä¼šæ ¹æ®æ–‡ä»¶å¤¹ä¾æ¬¡å¯»æ‰¾æ–‡ä»¶
      routes: {
        '/node_modules': 'node_modules'
      }
    }
  })
}

const useref = () => {
  return src('dist/*.html', { base: 'dist' })
    .pipe(plugins.useref({ searchPath: ['dist', '.'] }))
    .pipe(dest('dist'))
}

// parallel åŒæ—¶æ‰§è¡Œ
// series ç©¿è¡Œæ‰§è¡Œ
const compile = parallel(style, script, page)

// ä¸Šçº¿å‰æ‰§è¡Œçš„ä»»åŠ¡
const build = series(clean, parallel(compile, image, font, extra))

// å¼€å‘é˜¶æ®µæ‰§è¡Œçš„ä»»åŠ¡
const develop = series(compile, serve)

module.exports = {
  clean,
  compile,
  build,
  develop,
  useref
}

```

â€‹		æ‰§è¡Œå‘½ä»¤è¿›è¡Œæµ‹è¯•

```cmd
gulp clean

gulp compile

gulp useref
```

ğŸŒ°

```cmd
PS F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate> gulp clean
[00:01:58] Using gulpfile F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate\gulpfile.js
[00:01:58] Starting 'clean'...
[00:01:58] Finished 'clean' after 23 ms
PS F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate> gulp compile
[00:02:17] Using gulpfile F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate\gulpfile.js
[00:02:17] Starting 'compile'...
[00:02:17] Starting 'style'...
[00:02:17] Starting 'script'...
[00:02:17] Starting 'page'...
[00:02:19] Finished 'script' after 1.66 s
[00:02:19] Finished 'page' after 1.67 s
[00:02:19] Finished 'style' after 1.67 s
[00:02:19] Finished 'compile' after 1.68 s
PS F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate> gulp useref
[00:02:42] Using gulpfile F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate\gulpfile.js
[00:02:42] Starting 'useref'...
[00:02:42] Finished 'useref' after 306 ms
```

â€‹		è¿™æ—¶å€™ä¼šçœ‹åˆ°ä¸€ç”¨ **.html** çš„æ–‡ä»¶å¼•ç”¨å…³ç³»çš„è·¯å¾„éƒ½æŒ‡å‘ **dist** ç›®å½•ä¸‹ç›¸å…³çš„æ–‡ä»¶ã€‚



## æ–‡ä»¶å‹ç¼©å¤„ç†

â€‹		éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒè¿è¡Œçš„æ–‡ä»¶å°½å¯èƒ½çš„å°ï¼Œæ‰€ä»¥æœ‰å¿…è¦å¯¹ **.html** **.css** **.js** æ–‡ä»¶è¿›è¡Œå‹ç¼©å¤„ç†ã€‚

### 1. å®‰è£…ä¾èµ–åŒ…

```cmd
npm i gulp-htmlmin gulp-uglify gulp-clean-css -save-dev
```

ç”±äºéœ€è¦åˆ¤æ–­ æ–‡ä»¶çš„ç±»å‹éœ€è¦ç”¨åˆ°åˆ¤æ–­æ’ä»¶

```cmd
npm i gulp-if -save-dev
```

### 2. å¢åŠ æ–‡ä»¶å‹ç¼©åŠŸèƒ½

```js
Â·Â·Â·

const useref = () => {
  return src('dist/*.html', { base: 'dist' })
    .pipe(plugins.useref({ searchPath: ['dist', '.'] }))
    .pipe(plugins.if(/\.js$/, plugins.uglify()))
    .pipe(plugins.if(/\.css$/, plugins.cleanCss()))
    .pipe(plugins.if(/\.html$/, plugins.htmlmin({
            collapseWhitespace: true, // å‹ç¼©htmlé‡Œé¢çš„ç©ºç™½ç¬¦
            minifyCSS: true, // å‹ç¼©htmlé‡Œé¢çš„styleæ ‡ç­¾å†…å®¹
            minifyJS: true // å‹ç¼©htmlé‡Œé¢çš„scriptæ ‡ç­¾å†…å®¹
        })))
    .pipe(dest('dist'))
}

Â·Â·Â·
```

æµ‹è¯•ğŸŒ°

```cmd
yarn gulp clean

yarn gulp compile

yarn gulp useref
```

â€‹		è¿™æ—¶ä¼šçœ‹åˆ° **dist** ç›®å½•ä¸‹ç›¸å…³çš„æ–‡ä»¶å·²ç»è¢«å‹ç¼©äº†ã€‚



## é‡æ–°è§„åˆ’æ•´ä¸ªæ„å»ºè¿‡ç¨‹

â€‹		æ‰§è¡Œå‹ç¼©æ–‡ä»¶ä»»åŠ¡åï¼Œæœ‰æ—¶å€™ä½ ä¼šçœ‹åˆ°ï¼Œæœ‰äº›æ–‡ä»¶æ˜¯ç©ºç™½çš„ï¼Œç”±äºå¯¹ç›¸åŒæ–‡ä»¶çš„æ–‡ä»¶æµè¯»å–å’Œå†™å…¥ä¼šé€ æˆä¸€äº›å†²çªï¼Œæ‰€ä»¥éœ€è¦æŠŠæ„å»ºå®Œæˆåçš„æ–‡ä»¶æ”¾åœ¨ä¸´æ—¶æ–‡ä»¶ç›®å½•ä¸­ï¼Œå†è¿›è¡Œå‹ç¼©å¤„ç†ã€‚

```js
// å®ç°è¿™ä¸ªé¡¹ç›®çš„æ„å»ºä»»åŠ¡
const { src, dest, parallel, series, watch } = require('gulp')

const loadPlugins = require('gulp-load-plugins') // å¯¼å…¥æ’ä»¶è‡ªåŠ¨åŠ è½½å·¥å…·
const plugins = loadPlugins()

const browserSync = require('browser-sync') // å¯¼å…¥ browser-sync æ’ä»¶
const bs = browserSync.create()

const del = require('del') // å¯¼å…¥ del æ’ä»¶
const ftp = require('gulp-sftp')

const data = {
  menus: [
    {
      name: 'Home',
      icon: 'aperture',
      link: 'index.html'
    },
    {
      name: 'Features',
      link: 'features.html'
    },
    {
      name: 'About',
      link: 'about.html'
    },
    {
      name: 'Contact',
      link: '#',
      children: [
        {
          name: 'Twitter',
          link: 'https://twitter.com/w_zce'
        },
        {
          name: 'About',
          link: 'https://weibo.com/zceme'
        },
        {
          name: 'divider'
        },
        {
          name: 'About',
          link: 'https://github.com/zce'
        }
      ]
    }
  ],
  pkg: require('./package.json'),
  date: new Date()
}

const clean = () => {
  return del(['dist', 'temp'])
}

const style = () => {
  return src('src/assets/styles/*.scss', { base: 'src' })
    .pipe(plugins.sass({ outputStyle: 'expanded' }))// æŒ‰ç…§å®Œå…¨å±•å¼€çš„æ ¼å¼è½¬æ¢
    .pipe(dest('temp'))
}

const script = () => {
  return src('src/assets/scripts/*.js', { base: 'src' })
    .pipe(plugins.babel({ presets: ['@babel/preset-env'] }))
    .pipe(dest('temp'))
}

const page = () => {
  return src('src/*.html', { base: 'src' }) // å‡å¦‚è¦è£…æ¢ä»»æ„ç›®å½•ä¸‹çš„ .html æ–‡ä»¶ï¼Œ'src/**/*.html'
    .pipe(plugins.swig({ data }))
    .pipe(dest('temp'))
}

const image = () => {
  return src('src/assets/images/**', { base: 'src' })
    .pipe(plugins.imagemin())
    .pipe(dest('dist'))
}

const font = () => {
  return src('src/assets/fonts/**', { base: 'src' })
    .pipe(plugins.imagemin())
    .pipe(dest('dist'))
}

const extra = () => {
  return src('public/**', { base: 'public' })
    .pipe(dest('dist'))
}

const serve = () => {
  // ç›‘å¬çš„æ–‡ä»¶è·¯å¾„ æ–‡ä»¶å‘ç”Ÿå˜åŒ–åéœ€è¦æ‰§è¡Œçš„æ„å»ºä»»åŠ¡
  watch('src/assets/styles/*.scss', style)
  watch('src/assets/scripts/*.js', script)
  watch('src/*.html', page)
  watch([
    'src/assets/images/**',
    'src/assets/fonts/**',
    'public/**'
  ], bs.reload) // ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œé‡æ–°å‘é€è¯·æ±‚

  bs.init({
    notify: false, // å…³æ‰æç¤º
    port: 2080, // è®¾ç½®ç«¯å£
    // open: false, // å–æ¶ˆè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
    // files: 'dist/**', // éœ€è¦ç›‘å¬çš„æ–‡ä»¶
    server: {
      baseDir: ['temp', 'src', 'public'], // ä¼šæ ¹æ®æ–‡ä»¶å¤¹ä¾æ¬¡å¯»æ‰¾æ–‡ä»¶
      routes: {
        '/node_modules': 'node_modules'
      }
    }
  })
}

const lint = () => {
  return src('dist/*.html', { base: 'temp' })
    .pipe(plugins.useref({ searchPath: ['temp', '.'] }))
    .pipe(plugins.if(/\.js$/, plugins.uglify()))
    .pipe(plugins.if(/\.css$/, plugins.cleanCss()))
    .pipe(plugins.if(/\.html$/, plugins.htmlmin({
      collapseWhitespace: true, // å‹ç¼©htmlé‡Œé¢çš„ç©ºç™½ç¬¦
      minifyCSS: true, // å‹ç¼©htmlé‡Œé¢çš„styleæ ‡ç­¾å†…å®¹
      minifyJS: true // å‹ç¼©htmlé‡Œé¢çš„scriptæ ‡ç­¾å†…å®¹
    })))
    .pipe(dest('dist'))
}

// parallel åŒæ—¶æ‰§è¡Œ
// series ç©¿è¡Œæ‰§è¡Œ
const compile = parallel(style, script, page)

// ä¸Šçº¿å‰æ‰§è¡Œçš„ä»»åŠ¡
const build = series(clean, parallel(compile, image, font, extra))

// å¼€å‘é˜¶æ®µæ‰§è¡Œçš„ä»»åŠ¡
const start = series(compile, serve)

module.exports = {
  lint,
  compile,
  serve,
  build,
  clean,
  start,
}
```





## è‡ªåŠ¨åŒ–éƒ¨ç½²

### 1.å®‰è£…ä¾èµ–

```cmd
// 1. å…¨å±€å®‰è£… gulp å’Œ gulp-sftpï¼š
npm i --global gulp
npm i --global gulp-sftp
 
// 2. ä½œä¸ºé¡¹ç›®çš„å¼€å‘ä¾èµ–ï¼ˆdevDependenciesï¼‰å®‰è£…ï¼š
npm i --save-dev gulp-sftp
```



### 2. åˆ›å»º upload ä»»åŠ¡

**gulp-config.js**

```js
module.exports = {
  // éƒ¨ç½²æ­£å¼æœåŠ¡å™¨ä¸Š
  devDist: {
    // éƒ¨ç½²åˆ°æœåŠ¡å™¨çš„è·¯å¾„
    remotePath: '/ZZC1206/zzc-pages',
    // ipåœ°å€
    host: '140.82.114.4',
    // å¸å·
    user: '960052730@qq.com',
    // å¯†ç 
    pass: 'xxxxxxxxxxx',
    // ç«¯å£
    port: 22,
    // å…¬é’¥
    key: 'C:/Users/Sharvin/.ssh/id_rsa.pub'
  },
  // ç¨‹åºç¼–è¯‘å¥½è·¯å¾„
  publicPath: '/dist/'
}

```



```js
// å®ç°è¿™ä¸ªé¡¹ç›®çš„æ„å»ºä»»åŠ¡
const { src, dest, parallel, series, watch } = require('gulp')

const loadPlugins = require('gulp-load-plugins') // å¯¼å…¥æ’ä»¶è‡ªåŠ¨åŠ è½½å·¥å…·
const plugins = loadPlugins()

const browserSync = require('browser-sync') // å¯¼å…¥ browser-sync æ’ä»¶
const bs = browserSync.create()

const del = require('del') // å¯¼å…¥ del æ’ä»¶

const ftp = require('gulp-sftp')
const gulpConfig = require('./gulp-config.js');

const data = {
  menus: [
    {
      name: 'Home',
      icon: 'aperture',
      link: 'index.html'
    },
    {
      name: 'Features',
      link: 'features.html'
    },
    {
      name: 'About',
      link: 'about.html'
    },
    {
      name: 'Contact',
      link: '#',
      children: [
        {
          name: 'Twitter',
          link: 'https://twitter.com/w_zce'
        },
        {
          name: 'About',
          link: 'https://weibo.com/zceme'
        },
        {
          name: 'divider'
        },
        {
          name: 'About',
          link: 'https://github.com/zce'
        }
      ]
    }
  ],
  pkg: require('./package.json'),
  date: new Date()
}
// æ¸…é™¤æ–‡ä»¶
const clean = () => {
  return del(['dist', 'temp'])
}
// æ ·å¼æ„å»ºä»»åŠ¡
const style = () => {
  return src('src/assets/styles/*.scss', { base: 'src' })
    .pipe(plugins.sass({ outputStyle: 'expanded' }))// æŒ‰ç…§å®Œå…¨å±•å¼€çš„æ ¼å¼è½¬æ¢
    .pipe(dest('temp'))
}
// è„šæœ¬æ„å»ºä»»åŠ¡
const script = () => {
  return src('src/assets/scripts/*.js', { base: 'src' })
    .pipe(plugins.babel({ presets: ['@babel/preset-env'] }))
    .pipe(dest('temp'))
}
// é¡µé¢æ¨¡æ¿æ„å»ºä»»åŠ¡
const page = () => {
  return src('src/*.html', { base: 'src' }) // å‡å¦‚è¦è£…æ¢ä»»æ„ç›®å½•ä¸‹çš„ .html æ–‡ä»¶ï¼Œ'src/**/*.html'
    .pipe(plugins.swig({ data }))
    .pipe(dest('temp'))
}
// å›¾ç‰‡æ„å»ºä»»åŠ¡
const image = () => {
  return src('src/assets/images/**', { base: 'src' })
    .pipe(plugins.imagemin())
    .pipe(dest('dist'))
}
// å­—ä½“åŒ…æ„å»ºä»»åŠ¡
const font = () => {
  return src('src/assets/fonts/**', { base: 'src' })
    .pipe(plugins.imagemin())
    .pipe(dest('dist'))
}
// å…¶ä»–æ–‡ä»¶æ„å»ºä»»åŠ¡
const extra = () => {
  return src('public/**', { base: 'public' })
    .pipe(dest('dist'))
}
// å¼€å¯æœåŠ¡å™¨ä»»åŠ¡
const serve = () => {
  // ç›‘å¬çš„æ–‡ä»¶è·¯å¾„ æ–‡ä»¶å‘ç”Ÿå˜åŒ–åéœ€è¦æ‰§è¡Œçš„æ„å»ºä»»åŠ¡
  watch('src/assets/styles/*.scss', style)
  watch('src/assets/scripts/*.js', script)
  watch('src/*.html', page)
  watch([
    'src/assets/images/**',
    'src/assets/fonts/**',
    'public/**'
  ], bs.reload) // ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œé‡æ–°å‘é€è¯·æ±‚

  bs.init({
    notify: false, // å…³æ‰æç¤º
    port: 2080, // è®¾ç½®ç«¯å£ï¼Œç«¯å£ä»»æ„ï¼Œåªè¦æ˜¯4ä½ã€‚å†²çªæ—¶æ”¹å†™ä¸€æ¬¡
    livereload: true, // å®æ—¶çƒ­æ›´æ–°ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚
    // open: false, // å–æ¶ˆè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
    files: 'temp/**', // éœ€è¦ç›‘å¬çš„æ–‡ä»¶
    server: {
      baseDir: ['temp', 'src', 'public'], // ä¼šæ ¹æ®æ–‡ä»¶å¤¹ä¾æ¬¡å¯»æ‰¾æ–‡ä»¶
      routes: {
        '/node_modules': 'node_modules'
      }
    }
  })
}
// é¡µé¢æ¨¡æ¿ src åœ°å€ æ„å»ºä»»åŠ¡
const lint = () => {
  return src('dist/*.html', { base: 'temp' })
    .pipe(plugins.useref({ searchPath: ['temp', '.'] }))
    .pipe(plugins.if(/\.js$/, plugins.uglify()))
    .pipe(plugins.if(/\.css$/, plugins.cleanCss()))
    .pipe(plugins.if(/\.html$/, plugins.htmlmin({
      collapseWhitespace: true, // å‹ç¼©htmlé‡Œé¢çš„ç©ºç™½ç¬¦
      minifyCSS: true, // å‹ç¼©htmlé‡Œé¢çš„styleæ ‡ç­¾å†…å®¹
      minifyJS: true // å‹ç¼©htmlé‡Œé¢çš„scriptæ ‡ç­¾å†…å®¹
    })))
    .pipe(dest('dist'))
}
// Git ä¸Šä¼ ä»»åŠ¡
const upload = (callback) => {
  return src('.' + gulpConfig.publicPath + '**')
    .pipe(ftp(Object.assign(gulpConfig.devDist, { callback })))
}

// parallel åŒæ—¶æ‰§è¡Œ
// series ç©¿è¡Œæ‰§è¡Œ

// ç¼–è¯‘ä»»åŠ¡
const compile = parallel(style, script, page)

// ä¸Šçº¿å‰æ‰§è¡Œçš„ä»»åŠ¡
const build = series(clean, parallel(compile, image, font, extra))

// å¼€å‘é˜¶æ®µæ‰§è¡Œçš„ä»»åŠ¡
const start = series(compile, serve)

// è‡ªåŠ¨éƒ¨ç½²ä»»åŠ¡
const deploy = series(build, upload)

module.exports = {
  lint,
  compile,
  serve,
  build,
  clean,
  deploy,
  start,
}

```

â€‹	 æ‰§è¡Œå‘½ä»¤æµ‹è¯•

```cmd
gulp deploy
```

ğŸŒ°

```cmd
PS F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate> gulp deploy
[08:06:11] Using gulpfile F:\lagoufed-e-task\part2\fed-e-task-02-01\code\pages-boilerplate\gulpfile.js
[08:06:11] Starting 'deploy'...
[08:06:11] Starting 'clean'...
[08:06:11] Finished 'clean' after 43 ms
[08:06:11] Starting 'image'...
[08:06:11] Starting 'font'...
[08:06:11] Starting 'extra'...
[08:06:11] Starting 'style'...
[08:06:11] Starting 'script'...
[08:06:11] Starting 'page'...
[08:06:15] Finished 'extra' after 3.68 s
[08:06:15] Finished 'script' after 3.68 s
[08:06:15] gulp-imagemin: Minified 1 image (saved 693 B - 6%)
[08:06:15] Finished 'page' after 3.68 s
[08:06:15] Finished 'style' after 3.69 s
[08:06:15] Finished 'font' after 3.7 s
[08:06:15] gulp-imagemin: Minified 2 images (saved 23.1 kB - 26.7%)
[08:06:15] Finished 'image' after 4.13 s
[08:06:15] Starting 'upload'...
[08:06:15] Authenticating with password.
[08:06:18] 'upload' errored after 3.09 s
[08:06:18] Error in plugin 'gulp-sftp'
Message:
    Authentication failure. Available authentication methods: publickey
Details:
    level: authentication
    partial: false
    domainEmitter: [object Object]
    domainThrown: false
[08:06:18] 'deploy' errored after 7.28 s
```

â€‹		è¿™é‡ŒæŠ¥é”™äº†ï¼Œæ‰¾ä¸åˆ°è§£å†³åŠæ³•ï¼Œèƒ½å¸®å¿™çœ‹çœ‹ä¹ˆã€‚



## é—®é¢˜æ±‡æ€»

### é—®é¢˜1ï¼šMessage: gulp-sass 5 does not have a default Sass compiler; please set one yourself.Both the `sass` and `node-sass` packages are permitted.

åŸå› ç›´æ¥æ‰§è¡Œ **npm i gulp-sass -save-dev** æ˜¯ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ **gulp-sass** çš„ï¼Œå¯ä»¥æŒ‡å®šå®‰è£…ä½ç‰ˆæœ¬

```cmd
npm i gulp-sass@4.0.2 -save-dev
```



### é—®é¢˜2ï¼šMessage:  Authentication failure. Available authentication methods: publickey

æš‚æ—¶ä¸ä¼šå¤„ç†